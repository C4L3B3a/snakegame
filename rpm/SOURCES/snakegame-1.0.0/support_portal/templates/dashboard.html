{% extends "base.html" %} <!-- It's part of base.html, so it doesn't need the entire <body>, <html>, <title> stuff.-->

{% block content %}
<!-- Navigation links -->
<a href="{{ url_for('ticket') }}">Create Ticket</a> | <a href="{{ url_for('logout') }}">Logout</a>

<h2>Your Tickets</h2>

<!-- Table displaying tickets -->
<table border="1">
    <!-- Table header -->
    <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Status</th>
        {% if is_admin %}
            <!-- Admins can see which user submitted the ticket -->
            <th>User</th>
        {% endif %}
        <th>Action</th>
    </tr>

    <!-- Loop through all tickets -->
    {% for t in tickets %}
    <tr>
        <!-- Ticket ID -->
        <td>{{ t[0] }}</td>

        <!-- Ticket title -->
        <td>{{ t[1] if is_admin else t[1] }}</td>

        <!-- Ticket status -->
        <td>{{ t[2] if is_admin else t[2] }}</td>

        {% if is_admin %}
            <!-- Show username column only to admins -->
            <td>{{ t[1] }}</td>
        {% endif %}

        <!-- Action link to view the ticket -->
        <td><a href="{{ url_for('view_ticket', ticket_id=t[0]) }}">View</a></td>
    </tr>
    {% endfor %}
</table>
{% endblock %}

<!-- By C4L-->